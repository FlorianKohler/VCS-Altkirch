---
title: "Grand Prix de Dannemarie"
output: 
  flexdashboard::flex_dashboard:
    theme: default
    favicon: images/favicon.ico
orientation: rows

---

```{r setup, echo=FALSE}
library(flexdashboard)
library(leaflet)
library(rgdal)
library(maps)
#knitr::opts_chunk$set(echo = FALSE)
library(rgdal)
library(maps)
library(htmltools)
library(devtools)
library(leaflet)
library(sp)
library(htmlwidgets)
library(plotKML)
library(maptools)
library(XML)

gpmIcon <- makeIcon(
  iconUrl = "images/icons/gpm.png",
  iconWidth = 38, iconHeight = 38,
  iconAnchorX = 1, iconAnchorY = 37,
  popupAnchorX = 28, popupAnchorY = -28
)

sprintIcon <- makeIcon(
  iconUrl = "images/icons/sprints.png",
  iconWidth = 38, iconHeight = 38,
  iconAnchorX = 1, iconAnchorY = 37,
  popupAnchorX = 30, popupAnchorY = -20
)

startIcon <- makeIcon(
  iconUrl = "images/icons/start.png",
  iconWidth = 70, iconHeight = 70,
  iconAnchorX = 25, iconAnchorY = 70
)

finishIcon <- makeIcon(
  iconUrl = "images/icons/finish.png",
  iconWidth = 38, iconHeight = 38,
  iconAnchorX = 37, iconAnchorY = 34,
  popupAnchorX = -36, popupAnchorY = -17
)

arrow_down <- makeIcon(
  iconUrl = "images/icons/Arrow_down.png",
  iconWidth = 26, iconHeight = 26,
  iconAnchorX = 13, iconAnchorY = 12
)

arrow_up <- makeIcon(
  iconUrl = "images/icons/Arrow_up.png",
  iconWidth = 26, iconHeight = 26,
  iconAnchorX = 13, iconAnchorY = 12
)

antidoping <- makeAwesomeIcon(
  icon = "medkit",
  library="fa",
  iconColor = "black",
   markerColor = "white"
  
)

ravito <- makeAwesomeIcon(
  icon = "glyphicon-cutlery",
  library="glyphicon",
  iconColor = "black",
   markerColor = "red"
)

wc <- makeAwesomeIcon(
  icon = "shower",
  library="fa",
  iconColor = "black"
)

dossards <- makeAwesomeIcon(
  icon = "fa-folder",
  library="fa",
  iconColor = "black"
)

repas <- makeAwesomeIcon(
  icon = "glyphicon-cutlery",
  library="glyphicon",
  markerColor = "red"
)

prix <- makeAwesomeIcon(
  icon = "fa-trophy",
  library="fa",
  markerColor = "orange"
)


```

Accueil {data-orientation=rows}
=====================================  

Row
-------------------------------------

###Date
```{r}
valueBox(value="27 mai 2018", caption="Dès 8h", icon = "fa-calendar")
```

###Catégorie
```{r}
valueBox(value="2-3-J-Pass'Open", caption="Épreuve FFC", icon = "fa-address-card")
```

Row
-------------------------------------

###Présentation
```{r}
valueBox(value="2", caption="étapes", icon = "fa-bicycle")
```

### Kilométrage 
```{r}
valueBox(value=127, caption="kilomètres", icon = "fa-road")
```

### Maillots
```{r}
valueBox(value=4, caption="maillots distinctifs", icon = "fa-trophy")
```


Row
-------------------------------------

###Règlement {data-width=67}

*__Classements annexes :__*


__GPM__ : 4, 2 et 1 point seront attribués aux 3 premiers à chaque passage au sommet de la côte de Gildwiller. Les ex æquo seront départagés par le nombre de 1ère puis de 2ème place aux GPM.
Le vainqueur se verra remettre le maillot rouge du meilleur grimpeur à l'issue de l'épreuve.

__Classement aux points :__ 4, 2 et 1 point seront attribués aux 3 premiers à chaque passage sur la ligne d'arrivée ainsi qu'à l'arrivée. Les ex æquo seront départagés par le nombre de 1ère puis de 2ème place aux sprints.
Le vainqueur se verra remettre le maillot vert du meilleur sprinter à l'issue de l'épreuve.

Les coureurs ayant abandonnés ne pourront prétendre aux deux classements annexes.

L'addition des temps des 2 étapes déterminera le __classement général__. En cas d'égalité les centièmes du CLM seront pris en compte.

Un __maillot jaune__ sera attribué au vainqueur du classement général et un __maillot blanc__ au 1er junior.

Pas de voitures suiveuses pour l'étape de l'après-midi, seules 2 voitures neutres de l'organisation, à qui il faudra remettre des roues, seront autorisées à suivre l'épreuve.

La réglementation FFC s'applique sur les points non abordés par cette publication.

ATTENTION : la route n'est pas privative et la partie gauche de la chaussée est réservée aux véhicules circulant en sens inverse.

###Prix {data-width=33}

Les prix seront remis sur place par l'organisateur (et non via la FFC). Seuls les coureurs présents se verront remettre leurs récompenses.


 * 1 ère étape : grille de prix 65/3 
 * 2 ème étape : grille de prix 110/10

Classement général au temps, maillot jaune :

 * grille de prix 115/5

Classement par points, maillot vert :

 * Prix en nature 

Classement par points, maillot à pois :

 * Prix en nature 

Classement du meilleur jeune :

 * Prix en nature 



Divers (dossards, restauration, ...) {data-orientation=rows}
=====================================     

Row {data-height=600}
-------------------------------------

### Informations

**_Distribution des dossards_**

Elle se fera à la Salle Polyvalente de Dannemarie à partir de 8h00.

Attention, les coureurs inscrits sur place (max 15) seront les premiers à partir le matin.




**_Restauration à midi_**

Le repas du dimanche midi est servi à la salle polyvalente de Dannemarie.
Le Prix est de *14 euros par personne (entrée, plat, dessert)* : 

__Réservation et règlement__ sont à effectuer auprès du Président Gilles Hartmann __au plus tard le vendredi 18 mai 2018__ :

Téléphone : 03 89 40 29 24

Mail : hartmann.gilles\@gmail.com

Adresse : 23 rue de Carspach 68118 HIRTZBACH

### Carte

```{r}

your.map <- leaflet() %>%
  # Add layer
  addProviderTiles(providers$OpenStreetMap)  %>%
  addAwesomeMarkers(7.110730, 47.629257, label="Vestiaires et WC", icon=wc) %>%
  addAwesomeMarkers(7.111010, 47.629257, label="Restauration midi", icon=repas) %>%
  addAwesomeMarkers(7.111300, 47.629257, label="Dossards", icon=dossards) %>%
  addAwesomeMarkers(7.121010, 47.631545, label="Contrôle Anti-Dopage", icon=antidoping) 

  
your.map
```

Contre-la-Montre (Matin) {data-orientation=rows}
=====================================     
   
###Informations {data-width=40}

1er départ dès 9h00 puis de minute en minute.
Les horaires de départ seront consultables sur le site du VCSA  la veille de l'épreuve : [www.vcs-altkirch.fr](www.vcs-altkirch.fr)

__Parcours :__ Foyer de Balschwiller, Hagenbach, Gommersdorf, Dannemarie soit 6,9 km.


__Les vélos spéciaux CLM ne sont pas autorisés__, la machine utilisée pour le CLM devra être identique à celle utilisée pour l'épreuve de l'après-midi.

Un maillot jaune sera attribué au vainqueur du CLM ainsi qu'un maillot blanc au 1er junior. Ces maillots devront être portés lors de la 2ème étape.


###Carte {data-width=60}

```{r}
pct <- readOGR("chrono.gpx", layer = "tracks", verbose=FALSE)

your.map <- leaflet(pct) %>%
  # Add layer
  addProviderTiles(providers$OpenStreetMap)  %>%
  addPolylines(color="blue", popup="Parcours")   %>%
  addMarkers(7.164577, 47.674719, icon = startIcon, label="Départ") %>%
  addMarkers( 7.120155, 47.631265, icon = finishIcon, label="Arrivée") %>%
  addAwesomeMarkers(7.110884, 47.629672, icon=prix, label="Remise des prix du CLM (12h00)")
  

your.map
```

Course en ligne (Après-midi) {data-orientation=rows}
===================================== 

Row
-------------------------------------

###Informations {data-width=40}

__Lieu du départ :__ Dannemarie devant l'ancienne Mairie

__Heure de départ :__ 14h30

__Circuit :__ Dannemarie, Wolfersdorf, Traubach le Bas, Traubach le Haut, Falkwiller, Gildwiller le Mont, Balschwiller,  Hagenbach, Gommersdorf, Dannemarie soit 20 km.
Nombre de tours : 5 soit 100 km.

__Zone de ravitaillement :__ uniquement dans la montée de Gildwiller le Mont  (zone identifiée)

__Rappels:__

* Pas de voitures suiveuses pour l'étape de l'après-midi, seules 2 voitures neutres de l'organisation, à qui il faudra remettre des roues, seront autorisées à suivre l'épreuve.

* ATTENTION : la route n'est pas privative et la partie gauche de la chaussée est réservée aux véhicules circulant en sens inverse.

Petite restauration sur la ligne de départ / arrivée.



###Carte {data-width=60}

```{r}
pct <- readOGR("circuit.gpx", layer = "tracks", verbose=FALSE)

your.map <- leaflet(pct) %>%
  # Add layer
  addProviderTiles(providers$OpenStreetMap)  %>%
  addPolylines(color="blue", popup="Parcours")  %>%
  addMarkers(7.144755, 47.688256, icon = gpmIcon, label="GPM") %>%
  addMarkers(7.120535, 47.631513, icon = sprintIcon, label="Sprints") %>%
  addMarkers(7.120535, 47.631513, icon = finishIcon, label="Départ et Arrivée") %>%
  addMarkers(7.097359, 47.659995, icon = arrow_up) %>%
  addMarkers(7.157729, 47.658324, icon = arrow_down) %>%
  addAwesomeMarkers(7.120971, 47.631602, icon=prix, label="Remise des prix étape 2 et classement final à 18h") %>%
  addAwesomeMarkers(7.140691, 47.685524, icon= ravito, label=" Ravitaillement (zone délimitée")
  
 # addPolygons(data=mapStates, fillColor = heat.colors(3, alpha = NULL), stroke = FALSE) %>%
  
  # # Add legend
  # addLegend(position = 'topright', colors = "blue", labels = "PCT", opacity = 0.4,
  #           title = 'Legend')
your.map
```
